(this.webpackJsonpNewsy=this.webpackJsonpNewsy||[]).push([[1],{119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(32),i=n.n(l),o=n(9),c=n(22),s=n(1),u=n(64),m=n(10),d=function(e){var t=e.title;return r.a.createElement(s.k,null,r.a.createElement(s.E,{style:{background:"#f0652f"},color:"primary"},r.a.createElement(s.D,{size:"large"},t)))},p=function(e){var t=e.title;return r.a.createElement(s.k,{collapse:"condense"},r.a.createElement(s.E,{style:{background:"#f0652f"},color:"primary"},r.a.createElement(s.D,{size:"large"},t)))},E=n(15),f=n(3),h=n.n(f),y=n(11),v=n(7),g=n(8),b=n(36),w=n.n(b),j=(n(104),n(106),{apiKey:"AIzaSyACiqs3syKViNZSWjv0uS7ooe3O5moqGuM",authDomain:"newsy-5d3ff.firebaseapp.com",databaseURL:"https://newsy-5d3ff.firebaseio.com",projectId:"newsy-5d3ff",storageBucket:"newsy-5d3ff.appspot.com",messagingSenderId:"691575037858",appId:"1:691575037858:web:1fd616882ae31eb545dcfb"}),k=new(function(){function e(){Object(v.a)(this,e),w.a.initializeApp(j),this.app=w.a,this.auth=w.a.auth(),this.db=w.a.firestore()}return Object(g.a)(e,[{key:"register",value:function(){var e=Object(y.a)(h.a.mark((function e(t,n,a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(n,a);case 2:return r=e.sent,e.abrupt("return",r.user.updateProfile({displayName:t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"resetPassword",value:function(e){return this.auth.sendPasswordResetEmail(e)}}]),e}());var x=n(40),O=function(e){var t=e.link,n=e.index,a=e.showCount,l=e.url,i=e.browser;return r.a.createElement(s.f,{routerLink:l,onClick:i,button:!0},r.a.createElement(s.g,{class:"ion-no-padding"},r.a.createElement(s.p,{lines:"none"},r.a.createElement(s.n,null,r.a.createElement(s.c,{style:{verticalAlign:"middle"},slot:"start"},a&&n),r.a.createElement(s.o,null,r.a.createElement("p",{style:{alignItems:"center",fontSize:"0.8rem",fontWeight:"normal"}},r.a.createElement(s.l,{icon:m.l,style:{verticalAlign:"middle"}})," ",r.a.createElement(s.B,{style:{verticalAlign:"middle"}},function(e){return new URL(e).hostname}(t.url))),r.a.createElement("div",{className:"ion-padding-vertical ion-text-wrap"},r.a.createElement("strong",{style:{fontSize:"1rem"}},t.description)),r.a.createElement("p",{style:{alignItems:"center",fontSize:"0.8 rem",fontWeight:"normal"}},r.a.createElement(s.l,{icon:m.f,style:{verticalAlign:"middle"}})," ",r.a.createElement(s.B,{style:{verticalAlign:"middle"}},t.voteCount," points")," | ",r.a.createElement(s.l,{icon:m.q,style:{verticalAlign:"middle"}})," ",r.a.createElement(s.B,{style:{verticalAlign:"middle"}},t.postedBy.name)," | ",r.a.createElement(s.l,{icon:m.v,style:{verticalAlign:"middle"}})," ",r.a.createElement(s.B,{style:{verticalAlign:"middle"}},Object(x.a)(t.created)),t.comments.length>0&&r.a.createElement(r.a.Fragment,null," | ",r.a.createElement(s.l,{icon:m.c,style:{verticalAlign:"middle"}})," ",r.a.createElement(s.B,{style:{verticalAlign:"middle"}},t.comments.length," comments"))," "))))))},C=function(e){var t=r.a.useState([]),n=Object(o.a)(t,2),a=n[0],l=n[1],i=e.location.pathname.includes("trending");function c(e){var t=e.docs.map((function(e){return Object(E.a)({id:e.id},e.data())}));l(t)}return r.a.useEffect((function(){var e=function(){if(i)return k.db.collection("links").orderBy("voteCount","desc").onSnapshot(c);return k.db.collection("links").orderBy("created","desc").onSnapshot(c)}();return function(){return e()}}),[i]),r.a.createElement(r.a.Fragment,null,a.map((function(e,t){return r.a.createElement(O,{key:e.id,showCount:!0,url:"/link/".concat(e.id),link:e,index:t+1})})))},S=function(e){return r.a.createElement(s.s,null,r.a.createElement(d,{title:"Newsy"}),r.a.createElement(s.i,{fullscreen:!0},r.a.createElement(p,{title:"Newsy"}),r.a.createElement(C,{location:e.location})))},P=function(e){return r.a.createElement(s.s,null,r.a.createElement(d,{title:"Trending"}),r.a.createElement(s.i,{fullscreen:!0},r.a.createElement(p,{title:"Trending"}),r.a.createElement(C,{location:e.location})))},A=r.a.createContext(null);function q(e){var t={};return e.description?e.description.length<10&&(t.description="The description must be at least 10 characters."):t.description="A description is required.",e.url?/^(ftp|http|https):\/\/[^ "]+$/.test(e.url)||(t.url="The URL must be valid."):t.url="A URL is required.",t}var I=n(19);function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,n=document.createElement("ion-toast");return n.message=e,n.duration=t,n.color="dark",document.body.appendChild(n),n.present()}var L=function(e,t,n){var a=r.a.useState(e),l=Object(o.a)(a,2),i=l[0],c=l[1],s=r.a.useState({}),u=Object(o.a)(s,2),m=u[0],d=u[1],p=r.a.useState(!1),f=Object(o.a)(p,2),h=f[0],y=f[1];return r.a.useEffect((function(){h&&(0===Object.keys(m).length?(n(),c(e),y(!1)):(_(Object.values(m).join(" ")),y(!1)))}),[m]),{handleSubmit:function(){var e=t(i);d(e),y(!0)},handleChange:function(e){c((function(t){return Object(E.a)(Object(E.a)({},t),{},Object(I.a)({},e.target.name,e.target.value))}))},values:i,setValues:c,isSubmitting:h}},N={description:"",url:""},U=function(e){var t=r.a.useContext(A).user,n=L(N,q,(function(){if(t){var n=i.url,a=i.description,r={url:n,description:a,postedBy:{id:t.uid,name:t.displayName},voteCount:1,votes:[],comments:[],created:Date.now()};k.db.collection("links").add(r),e.history.push("/")}else e.history.push("/login")})),a=n.handleChange,l=n.handleSubmit,i=n.values;return r.a.createElement(s.s,null,r.a.createElement(d,{title:"Submit"}),r.a.createElement(s.i,{fullscreen:!0},r.a.createElement(p,{title:"Submit"}),r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"Description"),r.a.createElement(s.m,{name:"description",type:"text",value:i.description,onIonChange:a,required:!0})),r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"URL"),r.a.createElement(s.m,{name:"url",type:"url",value:i.url,onIonChange:a,required:!0})),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{expand:"block",color:"primary",type:"submit",onClick:l},"Submit")))))},B=function(){var e=r.a.useState([]),t=Object(o.a)(e,2),n=t[0],a=t[1],l=r.a.useState(""),i=Object(o.a)(l,2),c=i[0],u=i[1],m=r.a.useState([]),f=Object(o.a)(m,2),h=f[0],y=f[1];return r.a.useEffect((function(){k.db.collection("links").get().then((function(e){var t=e.docs.map((function(e){return Object(E.a)({id:e.id},e.data())}));a(t)}))}),[]),r.a.useEffect((function(){!function(){var e=c.toLowerCase(),t=n.filter((function(t){return t.description.toLowerCase().includes(e)||t.url.toLowerCase().includes(e)||t.postedBy.name.toLowerCase().includes(e)}));y(t)}()}),[c]),r.a.createElement(s.s,null,r.a.createElement(d,{title:"Search"}),r.a.createElement(s.i,{fullscreen:!0},r.a.createElement(p,{title:"Search"}),r.a.createElement(s.x,{placeholder:"Search",spellcheck:"false",type:"url",value:c,onKeyPress:function(e){"Enter"===e.key&&u(e.target.value)},animated:!0}),h.map((function(e,t){return r.a.createElement(O,{key:e.id,showCount:!1,link:e,index:t,url:"/link/".concat(e.id)})}))))},D=function(e){var t=r.a.useContext(A).user;function n(){return(n=Object(y.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.logout();case 3:e.history.push("/"),_("You have logged out successfully."),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Logout Error",t.t0),_(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return r.a.createElement(s.s,null,r.a.createElement(d,{title:"Profile"}),r.a.createElement(s.i,{fullscreen:!0},r.a.createElement(p,{title:"Profile"}),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.p,{list:"none"},r.a.createElement(s.n,null,r.a.createElement(s.l,{icon:m.q,slot:"start"}),r.a.createElement(s.o,null,r.a.createElement("strong",null,t.displayName),r.a.createElement("p",null,"Username"))),r.a.createElement(s.n,null,r.a.createElement(s.l,{icon:m.m,slot:"start"}),r.a.createElement(s.o,null,r.a.createElement("strong",null,t.email),r.a.createElement("p",null,"Email")))))),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{expand:"block",routerLink:"/edit-profile",color:"primary",fill:"outline"},"Edit Profile"))),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{expand:"block",onClick:function(){return n.apply(this,arguments)}},"Log Out")))):r.a.createElement(s.j,null,r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{expand:"block",routerLink:"/register",color:"primary"},"Sign Up"))),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{expand:"block",routerLink:"/login",color:"primary",fill:"outline"},"Log In"))))))},Y=function(e){var t=e.title,n=e.option,a=e.icon,l=e.action;return r.a.createElement(s.k,null,r.a.createElement(s.E,{color:"primary"},r.a.createElement(s.e,{slot:"start"},r.a.createElement(s.b,{defaultHref:"/"})),n&&r.a.createElement(s.e,{slot:"primary"},r.a.createElement(s.d,{onClick:l},r.a.createElement(s.l,{slot:"icon-only",icon:a}))),r.a.createElement(s.D,null,t)))};function z(e){var t={};return e.name||(t.name="A username is required."),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Your email is invalid."):t.email="Your email is required.",e.currentPassword?e.currentPassword.length<6&&(t.currentPassword="Your current password must be at least 6 characters."):t.currentPassword="Your current password is required.",e.newPassword.length<6&&(t.newPassword="Your new password must be at least 6 characters."),t}var Z=function(e){var t=r.a.useContext(A),n=t.user,a=t.setUser,l={name:n&&n.displayName,email:n&&n.email,newPassword:"",currentPassword:""},i=L(l,z,(function(){return O.apply(this,arguments)})),c=i.handleSubmit,u=i.handleChange,m=i.setValues,d=i.values,p=i.isSubmitting,E=r.a.useState(!1),f=Object(o.a)(E,2),v=f[0],g=f[1];function b(e,t){return w.apply(this,arguments)}function w(){return(w=Object(y.a)(h.a.mark((function e(t,a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k.app.auth.EmailAuthProvider.credential(t,a),e.prev=1,e.next=4,n.reauthenticateWithCredential(r);case 4:console.log("Reauthentication Successful"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Profile Update Error",e.t0),_(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function j(e,t,n){return x.apply(this,arguments)}function x(){return(x=Object(y.a)(h.a.mark((function e(t,a,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateProfile({displayName:t});case 2:return e.next=4,n.updateEmail(a);case 4:if(!r){e.next=7;break}return e.next=7,n.updatePassword(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(y.a)(h.a.mark((function t(){var r,l,i,o,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(!0),r=d.name,l=d.email,i=d.currentPassword,o=d.newPassword,t.prev=2,t.next=5,b(n.email,i);case 5:return t.next=7,j(r,l,o);case 7:return t.next=9,k.login(l,o||i);case 9:c=t.sent,m({name:n&&n.displayName,email:n&&n.email,newPassword:"",currentPassword:""}),a(c.user),_("You have updated your profile successfully."),e.history.push("/profile"),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(2),console.error("Profile Update Error",t.t0),_(t.t0.message);case 20:g(!1);case 21:case"end":return t.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}return r.a.createElement(s.s,null,r.a.createElement(Y,{title:"Edit Profile"}),r.a.createElement(s.q,{message:"Please wait...",isOpen:v}),r.a.createElement(s.i,null,r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"Username"),r.a.createElement(s.m,{name:"name",type:"text",value:d.name,onIonChange:u,required:!0})),r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"Email"),r.a.createElement(s.m,{name:"email",type:"text",value:d.email,onIonChange:u,required:!0})),r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"New Password"),r.a.createElement(s.m,{name:"newPassword",type:"password",value:d.newPassword,onIonChange:u,required:!0})),r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"Current Password"),r.a.createElement(s.m,{name:"currentPassword",type:"password",value:d.currentPassword,onIonChange:u,required:!0})),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{expand:"block",color:"primary",type:"submit",onClick:c,disabled:p},"Save")))))};function R(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Your email is invalid."):t.email="Your email is required.",t}var W={email:""},F=function(){var e=L(W,R,(function(){return d.apply(this,arguments)})),t=e.handleSubmit,n=e.handleChange,a=e.values,l=e.isSubmitting,i=r.a.useState(!1),c=Object(o.a)(i,2),u=c[0],m=c[1];function d(){return(d=Object(y.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t=a.email,e.prev=2,e.next=5,k.resetPassword(t);case 5:_("Check your email to reset your password."),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Password Reset Error",e.t0),_(e.t0.message);case 12:m(!1);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement(s.s,null,r.a.createElement(Y,{title:"Password Reset"}),r.a.createElement(s.q,{message:"Please wait...",isOpen:u}),r.a.createElement(s.i,null,r.a.createElement(s.n,null,r.a.createElement(s.o,{position:"floating"},"Email"),r.a.createElement(s.m,{name:"email",type:"text",value:a.email,onIonChange:n,required:!0})),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{type:"submit",color:"primary",expand:"block",onClick:t,disabled:l},"Get Reset Link")))))};function T(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Your email is invalid."):t.email="Your email is required.",e.password?e.password.length<6&&(t.password="Your password must be at least 6 characters."):t.password="A password is required.",t}var $={email:"",password:""},K=function(e){var t=L($,T,(function(){return p.apply(this,arguments)})),n=t.handleSubmit,a=t.handleChange,l=t.values,i=t.isSubmitting,c=r.a.useState(!1),u=Object(o.a)(c,2),m=u[0],d=u[1];function p(){return(p=Object(y.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),n=l.email,a=l.password,t.prev=2,t.next=5,k.login(n,a);case 5:_("You have logged in successfully!"),e.history.push("/"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("Authentication Error",t.t0),_(t.t0.message);case 13:d(!1);case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}return r.a.createElement(s.s,null,r.a.createElement(Y,{title:"Log In"}),r.a.createElement(s.q,{message:"Please wait...",isOpen:m}),r.a.createElement(s.i,null,r.a.createElement(s.n,null,r.a.createElement(s.o,{position:"floating"},"Email"),r.a.createElement(s.m,{name:"email",type:"text",value:l.email,onIonChange:a,required:!0})),r.a.createElement(s.n,null,r.a.createElement(s.o,{position:"floating"},"Password"),r.a.createElement(s.m,{name:"password",type:"password",value:l.password,onIonChange:a,required:!0})),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{type:"submit",color:"primary",expand:"block",onClick:n,disabled:i},"Log In"))),r.a.createElement(s.w,null,r.a.createElement(s.h,{class:"ion-text-center ion-padding-vertical"},r.a.createElement(s.u,{routerLink:"/forgot"},"Forgot Password?")))))};function M(e){var t={};return e.name||(t.name="A username is required."),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Your email is invalid."):t.email="Your email is required.",e.password?e.password.length<6&&(t.password="Your password must be at least 6 characters."):t.password="A password is required.",t}var V={name:"",email:"",password:""},G=function(e){var t=L(V,M,(function(){return p.apply(this,arguments)})),n=t.handleSubmit,a=t.handleChange,l=t.values,i=t.isSubmitting,c=r.a.useState(!1),u=Object(o.a)(c,2),m=u[0],d=u[1];function p(){return(p=Object(y.a)(h.a.mark((function t(){var n,a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),n=l.name,a=l.email,r=l.password,t.prev=2,t.next=5,k.register(n,a,r);case 5:_("You have signed up successfully!"),e.history.push("/"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("Authentication Error",t.t0),_(t.t0.message);case 13:d(!1);case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}return r.a.createElement(s.s,null,r.a.createElement(Y,{title:"Sign Up"}),r.a.createElement(s.q,{message:"Please wait...",isOpen:m}),r.a.createElement(s.i,null,r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"Username"),r.a.createElement(s.m,{name:"name",type:"text",value:l.name,onIonChange:a,required:!0})),r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"Email"),r.a.createElement(s.m,{name:"email",type:"text",value:l.email,onIonChange:a,required:!0})),r.a.createElement(s.n,{lines:"full"},r.a.createElement(s.o,{position:"floating"},"Password"),r.a.createElement(s.m,{name:"password",type:"password",value:l.password,onIonChange:a,required:!0})),r.a.createElement(s.w,null,r.a.createElement(s.h,null,r.a.createElement(s.d,{type:"submit",color:"primary",expand:"block",onClick:n,disabled:i},"Sign Up")))))};var J=function(){var e=r.a.useState(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return r.a.useEffect((function(){var e=k.auth.onAuthStateChanged((function(e){a(e||null)}));return function(){return e()}}),[]),[n,a]},H=n(35),Q=n(67),X=function(e){var t=e.isOpen,n=e.title,a=e.sendAction,l=e.closeAction,i=e.comment,c=r.a.useState(i?i.text:""),u=Object(o.a)(c,2),m=u[0],d=u[1];return r.a.createElement(s.r,{isOpen:t,onDidDismiss:l},r.a.createElement(s.k,{translucent:!0},r.a.createElement(s.E,{color:"primary"},r.a.createElement(s.D,null,n),r.a.createElement(s.e,{slot:"start"},r.a.createElement(s.d,{onClick:l},"Close")),r.a.createElement(s.e,{slot:"end"},r.a.createElement(s.d,{onClick:function(){return a(m),void d("")}},"Send")))),r.a.createElement(s.i,{fullscreen:!0},r.a.createElement(s.C,{row:25,col:25,placeholder:"Your Comment",value:m,onIonChange:function(e){return d(e.target.value)}})))},ee=function(e){var t=e.comment,n=e.link,a=e.setLink,l=r.a.useContext(A).user,i=r.a.useState(!1),c=Object(o.a)(i,2),u=c[0],m=c[1],d=l&&l.uid===t.postedBy.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{isOpen:u,title:"Edit Comment",sendAction:function(e){var r=k.db.collection("links").doc(n.id);r.get().then((function(n){if(n.exists){var i=n.data().comments,o={postedBy:{id:l.uid,name:l.displayName},created:Date.now(),text:e},c=i.map((function(e){return e.created===t.created?o:e}));r.update({comments:c}),a((function(e){return Object(E.a)(Object(E.a)({},e),{},{comments:c})}))}})),m(!1)},closeAction:function(){m(!1)},comment:t}),r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.p,{lines:"none"},r.a.createElement(s.n,null,r.a.createElement(s.o,{class:"ion-text-wrap"},r.a.createElement("p",{style:{alignItems:"center",fontSize:"0.8rem",fontWeight:"normal"}},t.postedBy.name," "," | ",Object(x.a)(t.created)),r.a.createElement("div",{className:"ion-padding-vertical"},t.text),d&&r.a.createElement(s.d,{size:"small",onClick:function(){return m(!0)}},"Edit"),d&&r.a.createElement(s.d,{size:"small",onClick:function(){return function(){var e=k.db.collection("links").doc(n.id);e.get().then((function(n){if(n.exists){var r=n.data().comments.filter((function(e){return e.created!==t.created}));e.update({comments:r}),a((function(e){return Object(E.a)(Object(E.a)({},e),{},{comments:r})}))}}))}()}},"Delete")))))))},te=Q.a.Browser,ne=function(e){var t=r.a.useContext(A).user,n=r.a.useState(null),a=Object(o.a)(n,2),l=a[0],i=a[1],c=r.a.useState(!1),u=Object(o.a)(c,2),d=u[0],p=u[1],f=e.match.params.linkId,v=k.db.collection("links").doc(f);function g(){return(g=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.open({url:l.url});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){v.get().then((function(e){i(Object(E.a)(Object(E.a)({},e.data()),{},{id:e.id}))}))}),{linkId:f}),r.a.createElement(s.s,null,r.a.createElement(Y,{title:l&&l.description,option:l&&function(e){return t&&t.uid===e.postedBy.id}(l),icon:m.i,action:function(){v.delete().then((function(){console.log("Document with ID $(link.id) deleted ")})).catch((function(e){console.error("Error deleting document",e)})),e.history.push("/")}}),r.a.createElement(s.i,null,r.a.createElement(X,{isOpen:d,title:"New Comment",sendAction:function(n){t?(v.get().then((function(e){if(e.exists){var a=e.data().comments,r={postedBy:{id:t.uid,name:t.displayName},created:Date.now(),text:n},l=[].concat(Object(H.a)(a),[r]);v.update({comments:l}),i((function(e){return Object(E.a)(Object(E.a)({},e),{},{comments:l})}))}})),p(!1)):e.history.push("/login")},closeAction:function(){p(!1)}}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.j,null,r.a.createElement(s.w,null,r.a.createElement(s.h,{class:"ion-text-center"},r.a.createElement(O,{link:l,browser:function(){return g.apply(this,arguments)}}),r.a.createElement(s.d,{onClick:function(){t?v.get().then((function(e){if(e.exists){var n=e.data().votes,a={votedBy:{id:t.uid,name:t.displayName}},r=[].concat(Object(H.a)(n),[a]),l=r.length;v.update({votes:r,voteCount:l}),i((function(e){return Object(E.a)(Object(E.a)({},e),{},{votes:r,voteCount:l})}))}})):e.history.push("/login")},size:"small"},"Upvote"),r.a.createElement(s.d,{onClick:function(){t?p(!0):e.history.push("/login")},size:"small"},"Comment")))),l.comments.map((function(e,t){return r.a.createElement(ee,{key:t,comment:e,link:l,setLink:i})})))))},ae=(n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),function(){var e=J(),t=Object(o.a)(e,2),n=t[0],a=t[1];return r.a.createElement(s.a,null,r.a.createElement(u.a,null,r.a.createElement(A.Provider,{value:{user:n,setUser:a}},r.a.createElement(s.A,null,r.a.createElement(s.v,null,r.a.createElement(c.b,{path:"/",render:function(){return r.a.createElement(c.a,{to:"/news"})},exact:!0}),r.a.createElement(c.b,{path:"/news",component:S}),r.a.createElement(c.b,{path:"/trending",component:P}),r.a.createElement(c.b,{path:"/submit",component:U}),r.a.createElement(c.b,{path:"/search",component:B}),r.a.createElement(c.b,{path:"/profile",component:D}),r.a.createElement(c.b,{path:"/register",component:G}),r.a.createElement(c.b,{path:"/login",component:K}),r.a.createElement(c.b,{path:"/edit-profile",component:Z}),r.a.createElement(c.b,{path:"/forgot",component:F}),r.a.createElement(c.b,{path:"/link/:linkId",component:ne}),r.a.createElement(c.b,{component:function(){return r.a.createElement(c.a,{to:"/news"})}})),r.a.createElement(s.y,{slot:"bottom"},r.a.createElement(s.z,{tab:"news",href:"/news"},r.a.createElement(s.l,{icon:m.p}),r.a.createElement(s.o,null,"Newsy")),r.a.createElement(s.z,{tab:"trending",href:"/trending"},r.a.createElement(s.l,{icon:m.w}),r.a.createElement(s.o,null,"Trending")),r.a.createElement(s.z,{tab:"submit",href:"/submit"},r.a.createElement(s.l,{icon:m.k}),r.a.createElement(s.o,null,"Submit")),r.a.createElement(s.z,{tab:"search",href:"/search"},r.a.createElement(s.l,{icon:m.t}),r.a.createElement(s.o,null,"Search")),r.a.createElement(s.z,{tab:"profile",href:"/profile"},r.a.createElement(s.l,{icon:m.q}),r.a.createElement(s.o,null,"Profile")))))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,n){e.exports=n(120)},77:function(e,t,n){var a={"./ion-action-sheet.entry.js":[122,5],"./ion-alert.entry.js":[123,6],"./ion-app_8.entry.js":[124,7],"./ion-avatar_3.entry.js":[125,18],"./ion-back-button.entry.js":[126,19],"./ion-backdrop.entry.js":[127,43],"./ion-button_2.entry.js":[128,20],"./ion-card_5.entry.js":[129,21],"./ion-checkbox.entry.js":[130,22],"./ion-chip.entry.js":[131,23],"./ion-col_3.entry.js":[132,44],"./ion-datetime_3.entry.js":[133,10],"./ion-fab_3.entry.js":[134,24],"./ion-img.entry.js":[135,45],"./ion-infinite-scroll_2.entry.js":[136,46],"./ion-input.entry.js":[137,25],"./ion-item-option_3.entry.js":[138,26],"./ion-item_8.entry.js":[139,27],"./ion-loading.entry.js":[140,28],"./ion-menu_3.entry.js":[141,29],"./ion-modal.entry.js":[142,8],"./ion-nav_2.entry.js":[143,15],"./ion-popover.entry.js":[144,9],"./ion-progress-bar.entry.js":[145,30],"./ion-radio_2.entry.js":[146,31],"./ion-range.entry.js":[147,32],"./ion-refresher_2.entry.js":[148,11],"./ion-reorder_2.entry.js":[149,17],"./ion-ripple-effect.entry.js":[150,47],"./ion-route_4.entry.js":[151,33],"./ion-searchbar.entry.js":[152,34],"./ion-segment_2.entry.js":[153,35],"./ion-select_3.entry.js":[154,36],"./ion-slide_2.entry.js":[155,48],"./ion-spinner.entry.js":[156,13],"./ion-split-pane.entry.js":[157,49],"./ion-tab-bar_2.entry.js":[158,37],"./ion-tab_2.entry.js":[159,16],"./ion-text.entry.js":[160,38],"./ion-textarea.entry.js":[161,39],"./ion-toast.entry.js":[162,40],"./ion-toggle.entry.js":[163,12],"./ion-virtual-scroll.entry.js":[164,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=77,e.exports=r},99:function(e,t,n){var a={"./ion-icon.entry.js":[168,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=99,e.exports=r}},[[71,3,4]]]);
//# sourceMappingURL=main.b0a318d8.chunk.js.map